#!/bin/bash
# -*- shell-script -*-


SECRET_NAME=tls-secret

openssl genrsa -out ca.key 2048

openssl req -x509                               \
  -new -nodes                                   \
  -days 365                                     \
  -key ca.key                                   \
  -out ca.crt                                   \
  -subj "/CN=engine.eval.net"

# anther suggestion:
# openssl req  -nodes -new -x509 -keyout ./certs/keystore.key -out \
#    ./certs/keystore.pem -subj '/CN=mydomain.net' -days 3650

# and another:
# openssl req -x509 -sha256 -nodes -days 365 -newkey rsa:2048
# -keyout tls.key -out tls.crt -subj "/CN=nginxsvc/O=nginxsvc"

kubectl create secret tls ${SECRET_NAME}        \
  --cert=ca.crt                                 \
  --key=ca.key
